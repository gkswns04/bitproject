<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>main</title>
<link href="../bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- font awesome -->
    <link href="../css/font-awesome.min.css" rel="stylesheet">
    <!-- Custom Style -->
    <link href="../css/style.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="../css/demo.css" />
    <link rel="stylesheet" type="text/css" href="../css/style.css" />
    <link rel="stylesheet" type="text/css" href="../css/animate-custom.css" />
<link rel="stylesheet" type="text/css" href="../css/reset.css">
<link rel="stylesheet" type="text/css" href="../css/common.css">
<style>
#nav:hover a {
   color: white;
}
#logodiv {
   position: absolute;
   width: 240px;
   margin: 0 -120px 0 0;
   right: 50%;
   top: 27%;
}

#searchdiv {
   position: absolute;
   height: 45px;
   width: 500px;
   top: 450px;
   right: 50%;
   margin: 0 -250px 0 0;
   z-index: 2;
}
#search {
   width: 400px;
   height: 41px;
   border: 2px black solid;
   background-color: transparent;
   background-image: url( "../images/searchbtn.png" );
   background-position: 99% 2px;
   background-repeat: no-repeat;
   font-size: 16px;
   font-weight: bold;
   text-align: center;
}
video#bgvid {
   position: absolute;
   top: 50%;
   left: 50%;
   min-width: 100%;
   min-height: 100%;
   width: auto;
   height: auto;
   z-index: -100;
   -ms-transform: translateX(-50%) translateY(-50%);
   -moz-transform: translateX(-50%) translateY(-50%);
   -webkit-transform: translateX(-50%) translateY(-50%);
   transform: translateX(-50%) translateY(-50%);
   background: url(polina.jpg) no-repeat;
   background-size: cover;
}
#signindiv {
   cursor:pointer;
}
#signinpop {
   position: absolute;
   top: 50%;
   left: 50%;
   margin: -300px 0 0 -370px;
}

body {
   min-width: 1024px;
}   
</style>
</head>
<body>
  <span id="threediv">
      <nav>
              <ul>
               <li><a href="../add/addasso.html" class="newfile-btn"><i></i><img src="../images/newfile.png" width="70"/><br></br>연상법 등록</a></li>
          <li><a href="../learn/learnchoice.html" class="study-btn"><i></i><img src="../images/pencil.png" width="70"/><br></br>연상법 학습</a></li>
          <li><a href="#" class="profile-btn"><i></i><img src="../images/pro.png" width="70"/><br></br>마이 페이지</a></li>
              </ul>
         </nav>
  </span>
  <span id="logodiv" align="center">
     <a href="../main/main.html"><img  src="../images/logo.png" alt="logo"/></a> 
  </span>
  <span id="signindiv">
	  <img id="sign" data-toggle="modal" href="#myModal" src="../images/signin.png" alt="signin" />
	  <img id="logout" href="#logout" src="../images/logout.png" alt="logout" />
  </span>
  

  <div id="searchdiv" align="center">
  <form method="get" action="../list/list.html">
    <input id="search" name="word" type="text" value="search"  onfocus="this.value=''" onblur="if(this.value =='') this.value='search';"/>
  </form>
  <br>


<script src="../bower_components/jquery/dist/jquery.js"></script>

  
  </div>
  <video autoplay loop poster="../images/mainback.jpg" id="bgvid">
     <source src="../images/background.mp4" type="video/mp4">
   </video>

	<div class="modal" id="myModal" aria-hidden="true"
		style="display: none; z-index: 1050;">
		<span id="signinpop">
			<div class="modal-dialog modal-lg">

				<div class="modal-body">
					<section>
						<div id="container_demo">
							<!-- hidden anchor to stop jump http://www.css3create.com/Astuce-Empecher-le-scroll-avec-l-utilisation-de-target#wrap4  -->
							<a class="hiddenanchor" id="toregister"></a> <a
								class="hiddenanchor" id="tologin"></a>
							<div id="wrapper">
								<div id="login" class="animate form">
									
									<form autocomplete="on" method='post'>
										<h1>Log in</h1>
										<p>
											<label for="username" class="uname" data-icon="u">Your email</label>
											<input id="email" name="email" required="required" type="text"
												placeholder="mymail@mail.com" />
										</p>
										<p>
											<label for="password" class="youpasswd" data-icon="p"> Your password</label>
											<input id="password" name="password" required="required" type="password"
											    placeholder="eg. X8df!90EO" />
											    
										</p>
										<p class="keeplogin">
											<input type="checkbox" name="loginkeeping" id="loginkeeping"
												value="loginkeeping" />
										    <label for="loginkeeping">Keep me logged in</label>
										</p>
									<p class="login button">
										<input  id="loginbtn" name="loginbtn" value="LOGIN" style="text-align:center;" readonly />
									</p>
									<p class="change_link">
										Not a member yet ? <a href="#toregister" class="to_register">Join
											us</a>
									</p>
									</form>
							</div>





								<div id="register" class="animate form">
									<form name="regi" autocomplete="on">
										<h1>Sign up</h1>
										<p>
											<label for="usernamesignup" class="uname" data-icon="u">Your
												username</label> <input id="usernamesignup" name="usernamesignup"
												required="required" type="text"
												placeholder="mysuperusername690" />
										</p>
										<p>
											<label for="emailsignup" class="youmail" data-icon="e">
												Your email</label> <input id="emailsignup" name="emailsignup"
												required="required" type="email"
												placeholder="mysupermail@mail.com" />
												<font name="mcheck" size="2" color="red"></font> 
												<font name="mchecked" size="2" color="blue"></font> 
										</p>
										<p>
											<label for="passwordsignup" class="youpasswd" data-icon="p">Your
												password </label> 
												<input id="passwordsignup" name="passwordsignup"
												required="required" type="password"
												placeholder="eg. X8df!90EO" />
												<font name="pcheck" size="2" color="red"></font> 
												<font name="pchecked" size="2" color="blue"></font> 
										</p>
										<p>
											<label for="passwordsignup_confirm" class="youpasswd"
												data-icon="p">Please confirm your password </label>
												 <input	id="passwordsignup_confirm" name="passwordsignup_confirm"
												required="required" type="password"
												placeholder="eg. X8df!90EO" />
												<font name="check" size="2" color="red"></font> 
												<font name="checked" size="2" color="blue"></font> 
										</p>
										<p class="signin button">
											<input id="signinbtn" value="Sign up" style="text-align:center;" readonly/>
										</p>
										<p class="change_link">
											Already a member ? <a href="#tologin" class="to_register">
												Go and log in </a>
										</p>
									</form>
								</div>

							</div>
						</div>
					</section>
				</div>
			</div>
		</span>
	</div>
	<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<!--     <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script> -->
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="../bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    
    
   <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
   
   

<script>
 <!-- 로그인!!! -->
$("#loginbtn").click(function(event) {
	$.post("../auth/login.do", {
		email : $("#email").val(),
		password : $("#password").val()
	}, function(result) {
		if (result.status == "success") {
			location.href = "main.html";
		} else if (result.status == "fail"){
			window.alert("아이디와 비밀번호가 맞지 않습니다.");
			setTimeout(function(){$("#email").focus();}, 1);
		}
	}, "json")
});
 

<!-- 이메일/비밀번호 정규식!!!!! -->
var regexEmail = /^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/;
var regexPassword =  /^(?=.*[a-zA-Z])(?=.*[0-9]).{6,16}$/;
<!-- 비밀번호 정규식 적용!!! -->
 $(function(){
  $('#passwordsignup').keyup(function(){
   $('font[name=check]').text('');
   	 if(!$('#passwordsignup').val().match(regexPassword)) {
   		 $('font[name=pcheck]').text('');
		 $('font[name=pcheck]').html("비밀번호는 숫자와 영문자 조합으로 6~16자리를 사용해 주세요");
		 $('font[name=pchecked]').text('');
   	 } else {
   		 $('font[name=pchecked]').text('');
		 $('font[name=pcheck]').text('');
   	 }
  });

  <!-- 회원가입시 pw / pw확인 일치하는지 스크립트 -->
  $('#passwordsignup_confirm').keyup(function(){
   if($('#passwordsignup').val()!=$('#passwordsignup_confirm').val()){
    $('font[name=check]').text('');
    $('font[name=check]').html("암호가 일치하지 않습니다.");
    $('font[name=checked]').text('');
    return;
   }else {
    $('font[name=checked]').text('');
    $('font[name=checked]').html("암호가 일치합니다.");
    $('font[name=check]').text('');
   }
  });
 });
 
<!-- 이메일 정규식 적용 -->
	$(function(){
		  $('#emailsignup').keyup(function(){
		   $('font[name=mcheck]').text('');
			   if(!$('#emailsignup').val().match(regexEmail)){
				    $('font[name=mcheck]').text('');
				    $('font[name=mcheck]').html("이메일은 test@test.com 형식으로 작성해 주세요.");
				    $('font[name=mchecked]').text('');
				    return;
				   }else {
				    $('font[name=mchecked]').text('');
				    $('font[name=mcheck]').text('');
				   }
			   
		  });
	 });
 
</script>



<!-- 로그인 하면 로그아웃 버튼 나타나게! -->
<script>
$.post("../auth/log.do", {
	nick : $("#usernamesignup").val(),
	email : $("#emailsignup").val(),
	password : $("#passwordsignup").val()
}, function(result) {
	if (result.status == "success") {
		$('#sign').css("display", "none");
		$('#logout').css("display", "");
	} else if (result.status == "failure"){
		$('#sign').css("display", "");
		$('#logout').css("display", "none");
	}
}, "json");
</script>

<script>
<!-- 회원가입 -->

	$("#signinbtn").click(function(event) {
		
		var theForm = document.regi;
		
		var member={"email":"", "nick":""};
				
		 $.ajax({
			  type: 'POST',
			  url: "../ajax/member/detailByNick.do",
			  data:  {
					nick : $("#usernamesignup").val()
				},
			  success: function(result) {
				  if (result != null) {
						member.nick = result.nick;
				  }
				},
			  dataType: "json",
			  async:false
			});
	
	 	$.ajax({
		  type: 'POST',
		  url: "../ajax/member/detailByEmail.do",
		  data:  {
				email : $("#emailsignup").val()
			},
		  success: function(result) {
			  if (result != null) {
				member.email = result.email;
			  }
			},
		  dataType: "json",
		  async:false
		});
	 	
			
			if(member.nick != "" || member.email !="") {	
				if(member.nick != "") {
					window.alert("이미 존재하는 닉네임 입니다.");
					theForm.usernamesignup.focus();
				} else if (member.email != "") {
					window.alert("이미 존재하는 이메일 입니다.");
					theForm.emailsignup.focus();
				}
			} else {
				if(theForm.usernamesignup.value!="" && theForm.emailsignup.value!="" && theForm.passwordsignup.value!="" && theForm.passwordsignup_confirm.value!="" ){
				   
					if(!$('#emailsignup').val().match(regexEmail)) {
						window.alert("이메일 형식에 맞지 않습니다.");
						theForm.emailsignup.focus();
					}else if(!$('#passwordsignup').val().match(regexPassword)) {
						window.alert("비밀번호 형식에 맞지 않습니다.");
						theForm.passwordsignup.focus();
					}else {
							if($("#passwordsignup").val() == $("#passwordsignup_confirm").val()) {
										$.post("../ajax/member/add.do", {
											nick : $("#usernamesignup").val(),
											email : $("#emailsignup").val(),
											password : $("#passwordsignup").val()
										}, function(result) {
											if (result.status == "success") {
												location.href = "main.html";
											} else {
												 window.alert("회원 등록 실패입니다!"); 
												}
											}, "json");
								}else if($("#passwordsignup").val() != $("#passwordsignup_confirm").val()) {
								window.alert("비밀번호가 일치하지 않습니다. 다시 입력해주세요.");
								}
					}
				} else if(theForm.usernamesignup.value=="" || theForm.emailsignup.value=="" || theForm.passwordsignup.value=="" || theForm.passwordsignup_confirm.value=="" ){
					if(theForm.usernamesignup.value==""){
						window.alert("닉네임을 입력해 주시기 바랍니다.");
						theForm.usernamesignup.focus();
					}else if(theForm.emailsignup.value==""){
						window.alert("이메일을 입력해 주시기 바랍니다.");
						theForm.emailsignup.focus();
					}else if(theForm.passwordsignup.value==""){
						window.alert("비밀번호를 입력해 주시기 바랍니다.");
						theForm.passwordsignup.focus();
					}else {
						window.alert("비밀번호를 확인해 주시기 바랍니다.");
						theForm.passwordsignup_confirm.focus();
					}
				}
			}
		
	});
	
	$("#logout").click(function(event) {location.href = "../auth/logout.do";});

</script>


</body>
</html>